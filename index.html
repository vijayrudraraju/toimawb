<!DOCTYPE html>
<html lang="en">
    <head>
        <title>toimawb</title>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="viewport" content="width=640,user-scalable=no"/>
        <meta charset="utf-8">
        <!-- Le styles -->
        <link href="http://fonts.googleapis.com/css?family=Snippet" rel="stylesheet" type="text/css">
        <link href="lib/toimawb.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #gears {
                background: rgb(0,0,0);
            }
            #gears-highlight {
                background: rgb(145,145,145);
            }
            #blawks {
                background: rgb(85,0,0);
            }
            #blawks-highlight {
                background: rgb(145,0,0);
            }
            #about {
                background: rgb(0,85,0);
            }
            #about-highlight {
                background: rgb(0,145,0);
            }
            #clone {
                background: rgb(0,0,85);
            }
            #clone-highlight {
                background: rgb(0,0,145);
            }
            #guestbook {
                background: rgb(85,85,0);
            }
            #guestbook-highlight {
                background: rgb(145,145,0);
            }
            #skratch {
                background: rgb(85,0,85);
            }
            #skratch-highlight {
                background: rgb(145,0,145);
            }
        </style>
    </head>
    <script type="text/javascript" src="/_utils/script/jquery.js"></script>
    <!--<script src="vendor/processing-1.3.6.min.js" type="text/javascript"></script>-->
    <script src="vendor/kinetic-core-toimawb.js" type="text/javascript"></script>
    <script type="text/javascript">
        var pixels = {};

        $(function() {
            window.scrollTo(0,0.9);
            console.log(this);

            var TOIMAWB = 
            (function() {
                var o = {
                    _width: 196,
                    _height: 196
                };

                var stage = new Kinetic.Stage({
                    container: "logo-container",
                    width: o._width,
                    height: o._height
                });

                var layer = new Kinetic.Layer();

                var rect = new Kinetic.Rect({
                    x: 10,
                    y: 10,
                    width: 100,
                    height: 50,
                    fill: 'rgb(127,0,127)',
                    stroke: "black",
                    strokeWidth: 4
                });

                var x = o._width/2;
                var y = o._height/2;
                var radius = o._width/2;
                var width = o._width;
                var height = o._height;

                var circleFace = (function() {
                    var obj = {};

                    obj.face = {
                        x: x,
                        y: y,
                        radius: radius,
                        fill: 'rgb(127,0,127)'
                    };

                    obj.eye1 = {
                        x: x-45,
                        y: x-34,
                        radius: {
                            x: 18,
                            y: 18 
                        },
                        fill: 'black'
                    }
                    obj.eye2 = {
                        x: x+45,
                        y: x-34,
                        radius: {
                            x: 18,
                            y: 18 
                        },
                        fill: 'black'
                    }
                    obj.eye3 = {
                        x: x,
                        y: x-59,
                        radius: {
                            x: 18,
                            y: 18 
                        },
                        fill: 'black'
                    }

                    obj.eyeMask1 = {
                        x: x-45,
                        y: y-22,
                        radius: {
                            x: 16,
                            y: 16
                        },
                        fill: 'rgb(127,0,127)'
                    };
                    obj.eyeMask2 = {
                        x: x+45,
                        y: y-22,
                        radius: {
                            x: 16,
                            y: 16
                        },
                        fill: 'rgb(127,0,127)'
                    };
                    obj.eyeMask3 = {
                        x: x,
                        y: y-70,
                        radius: {
                            x: 16,
                            y: 16
                        },
                        fill: 'rgb(127,0,127)'
                    };

                    obj.mouth = {
                        x: x,
                        y: y,
                        radius: {
                            x: radius-10,
                            y: radius-10
                        },
                        startAng: Math.PI,
                        endAng: Math.PI * 2,
                        fill: 'black'
                    };
                    obj.mouthMask = {
                        x: x,
                        y: y,
                        radius: {
                            x: radius-10,
                            y: radius-60
                        },
                        startAng: Math.PI,
                        endAng: Math.PI * 2,
                        fill: 'rgb(127,0,127)'
                    };

                    return obj;
                }());

                var squareFace = (function() {
                    var obj = {};

                    obj.face = {
                        x: x,
                        y: y,
                        width: width,
                        height: height,
                        fill: 'rgb(207,140,40)'
                    };

                    obj.eye1 = {
                        x: x-22 - 56,
                        y: 30,
                        width: 44,
                        height: 44,
                        fill: 'black'
                    }
                    obj.eye2 = {
                        x: x-22 + 56,
                        y: 30,
                        width: 44,
                        height: 44,
                        fill: 'black'
                    }
                    obj.eye3 = {
                        x: x-22,
                        y: 30,
                        width: 43,
                        height: 43,
                        fill: 'black'
                    }

                    obj.eyeMask1 = {
                        x: x-22 - 56 + 10,
                        y: 30 + 15,
                        width: 44 - 20,
                        height: 44,
                        fill: 'rgb(207,140,40)'
                    };
                    obj.eyeMask2 = {
                        x: x-22 + 56 + 10,
                        y: 30 + 15,
                        width: 44 - 20,
                        height: 44,
                        fill: 'rgb(207,140,40)'
                    };
                    obj.eyeMask3 = {
                        x: x-22 + 10,
                        y: 30 + 15,
                        width: 43 - 20,
                        height: 43,
                        fill: 'rgb(207,140,40)'
                    };

                    obj.mouth = {
                        x: 9,
                        y: 126,
                        width: 178,
                        height: 50,
                        fill: 'black'
                    };
                    obj.mouthMask = {
                        x: 9+15,
                        y: 126-15,
                        width: 178-30,
                        height: 50,
                        fill: 'rgb(207,140,40)'
                    };

                    return obj;
                }());

                var thisThing = new Kinetic.Ellipse(circleFace.face); 
                console.log(thisThing);

                layer.add(new Kinetic.Ellipse(circleFace.face));
                layer.add(new Kinetic.Ellipse(circleFace.eye1));
                layer.add(new Kinetic.Ellipse(circleFace.eye2));
                layer.add(new Kinetic.Ellipse(circleFace.eye3));
                layer.add(new Kinetic.Ellipse(circleFace.eyeMask1));
                layer.add(new Kinetic.Ellipse(circleFace.eyeMask2));
                layer.add(new Kinetic.Ellipse(circleFace.eyeMask3));
                layer.add(new Kinetic.Arc(circleFace.mouth));
                layer.add(new Kinetic.Arc(circleFace.mouthMask));
                stage.add(layer);

                var rectFace = (function() {
                    var obj = {};

                    obj.face = {
                        x: 0,
                        y: 0,
                        width: width,
                        height: height,
                        cornerRadius: x,
                        fill: {
                            r: 127,
                            g: 0,
                            b: 127
                        }
                    };

                    obj.eye1 = {
                        x: x-45 - 18,
                        y: y-34 - 18,
                        width: 36,
                        height: 36,
                        cornerRadius: 18,
                        fill: 'black'
                    }
                    obj.eye2 = {
                        x: x+45 - 18,
                        y: y-34 - 18,
                        width: 36,
                        height: 36,
                        cornerRadius: 18,
                        fill: 'black'
                    }
                    obj.eye3 = {
                        x: x-18,
                        y: y-59 - 18,
                        width: 36,
                        height: 36,
                        cornerRadius: 18,
                        fill: 'black'
                    }

                    obj.eyeMask1 = {
                        x: x-45 - 17,
                        y: y-22 - 17,
                        width: 36 - 3,
                        height: 36 - 3,
                        cornerRadius: 16,
                        fill: {
                            r: 127,
                            g: 0,
                            b: 127
                        }
                    };
                    obj.eyeMask2 = {
                        x: x+45 - 17,
                        y: y-22 - 17,
                        width: 36 - 3,
                        height: 36 - 3,
                        cornerRadius: 16,
                        fill: {
                            r: 127,
                            g: 0,
                            b: 127
                        }
                    };
                    obj.eyeMask3 = {
                        x: x-17,
                        y: y-70 - 17,
                        width: 36 - 3,
                        height: 36 - 3,
                        cornerRadius: 16,
                        fill: {
                            r: 127,
                            g: 0,
                            b: 127
                        }
                    };

                    obj.mouth = {
                        x: 10,
                        y: 10,
                        width: width-20,
                        height: height-20,
                        cornerRadius: x,
                        fill: 'black'
                    };
                    obj.mouthMask = {
                        x: x,
                        y: y,
                        width: width,
                        height: height,
                        startAng: Math.PI,
                        endAng: Math.PI * 2,
                        fill: {
                            r: 127,
                            g: 0,
                            b: 127
                        }
                    };

                    return obj;
                }());

                setTimeout(function() {
                    stage.clear();

                    var face = new Kinetic.Rect(rectFace.face); 
                    var mouth = new Kinetic.Rect(rectFace.mouth);
                    var mouthMask = new Kinetic.Arc(rectFace.mouthMask);
                    var eye1 = new Kinetic.Rect(rectFace.eye1);
                    var eye2 = new Kinetic.Rect(rectFace.eye2);
                    var eye3 = new Kinetic.Rect(rectFace.eye3);
                    var eyeMask1 = new Kinetic.Rect(rectFace.eyeMask1);
                    var eyeMask2 = new Kinetic.Rect(rectFace.eyeMask2);
                    var eyeMask3 = new Kinetic.Rect(rectFace.eyeMask3);

                    layer.add(face);
                    //layer.add(mouth);
                    //layer.add(mouthMask);
                    layer.add(eye1);
                    layer.add(eye2);
                    layer.add(eye3);
                    layer.add(eyeMask1);
                    layer.add(eyeMask2);
                    layer.add(eyeMask3);

                    stage.add(layer);

                    face.transitionTo({
                        duration: 1,
                        cornerRadius: 0,
                        fill: {
                            r: 207,
                            g: 140,
                            b: 40
                        },
                        callback: function() {
                            stage.clear();
                            layer.add(new Kinetic.Rect(squareFace.face));
                            layer.add(new Kinetic.Rect(squareFace.eye1));
                            layer.add(new Kinetic.Rect(squareFace.eye2));
                            layer.add(new Kinetic.Rect(squareFace.eye3));
                            layer.add(new Kinetic.Rect(squareFace.eyeMask1));
                            layer.add(new Kinetic.Rect(squareFace.eyeMask2));
                            layer.add(new Kinetic.Rect(squareFace.eyeMask3));
                            layer.add(new Kinetic.Rect(squareFace.mouth));
                            layer.add(new Kinetic.Rect(squareFace.mouthMask));
                            stage.add(layer);
                        }
                    });
                    eye1.transitionTo({
                        duration: 1,
                        x: x-22 - 56,
                        y: 30,
                        width: 44,
                        height: 44,
                        cornerRadius: 0
                    });
                    eye2.transitionTo({
                        duration: 1,
                        x: x-22 + 56,
                        y: 30,
                        width: 44,
                        height: 44,
                        cornerRadius: 0
                    });
                    eye3.transitionTo({
                        duration: 1,
                        x: x-22,
                        y: 30,
                        width: 44,
                        height: 44,
                        cornerRadius: 0
                    });
                    eyeMask1.transitionTo({
                        duration: 1,
                        x: x-22 - 56 + 10,
                        y: 30 + 15,
                        width: 44 - 20,
                        height: 44,
                        cornerRadius: 0,
                        fill: {
                            r: 207,
                            g: 140,
                            b: 40 
                        }
                    });
                    eyeMask2.transitionTo({
                        duration: 1,
                        x: x-22 + 56 + 10,
                        y: 30 + 15,
                        width: 44 - 20,
                        height: 44,
                        cornerRadius: 0,
                        fill: {
                            r: 207,
                            g: 140,
                            b: 40 
                        }
                    });
                    eyeMask3.transitionTo({
                        duration: 1,
                        x: x-22 + 10,
                        y: 30 + 15,
                        width: 43 - 20,
                        height: 43,
                        cornerRadius: 0,
                        fill: {
                            r: 207,
                            g: 140,
                            b: 40 
                        }
                    });
                }, 400);

                /*
                o.clear = function(p)
                {
                    p.background(0,0,0,0);
                }
                */

                o.drawCircleFace = function(p, count, max)
                {
                    var x = this._logoWidth/2;
                    var y = this._logoHeight/2;
                    var width = this._logoWidth;
                    var height = this._logoHeight;
                    var ipRatio = count/max;

                    var eyeRatio = 13/70;

                    var x1Ratio = 16/70;
                    var x2Ratio = 20/70;
                    var x3Ratio = 40/70;

                    var y1Ratio = 12/70;
                    var y2Ratio = 8/70;
                    var y3Ratio = 21/70;
                    var y4Ratio = 25/70;
                    var y5Ratio = 20/70;

                    // face 
                    //p.fill(207,140,40);
                    p.noStroke();
                    if (count === 0)
                    {
                        // face
                        p.fill(127,0,127);
                        p.ellipse(
                            x, y,
                            width, height
                        );

                        // eyes
                        p.fill(0,0,0);
                        p.ellipse(x-45, y-34, 36, 36);
                        p.ellipse(x+45,y-34,36,36);
                        p.ellipse(x,y-59,36,36);

                        p.fill(127,0,127);
                        p.ellipse(x-45, y-22, 36 - 3, 36 - 3);
                        p.ellipse(x+45, y-22, 36 - 3, 36 - 3);
                        p.ellipse(x, y-70, 36 - 3, 36 - 3);

                        // mouth
                        p.fill(0,0,0);
                        p.arc(
                            x,y,
                            width-20,height-20,
                        0,p.PI);
                        p.fill(127,0,127);
                        p.arc(
                            x,y,
                            width-20,height-120,
                        0,p.PI);
                    }
                    else
                    {
                        // face
                        p.fill(
                            127+((207-127)*ipRatio),
                            140*ipRatio,
                            127-((127-40)*ipRatio)
                        );
                        p.rect(
                            0, 0,
                            width, height,
                            x-(ipRatio*x), x-(ipRatio*x),
                            x-(ipRatio*x), x-(ipRatio*x)
                        );

                        // mouth
                        p.fill(0,0,0);
                        /*
                        p.arc(
                            x,y,
                            width-20,height-20,
                        0,p.PI);
                        */
                        p.rect(
                            10, 10,
                            width-20, height-20,
                            x-(ipRatio*x), x-(ipRatio*x),
                            x-(ipRatio*x), x-(ipRatio*x)
                        );

                        p.fill(
                            127+((207-127)*ipRatio),
                            140*ipRatio,
                            127-((127-40)*ipRatio)
                        );
                        p.arc(
                            x, y,
                            width, height,
                            p.PI, p.TWO_PI
                        );

                        // eyes
                        p.fill(0,0,0);
                        p.rect(
                            x-45-18 - ((78-63)*ipRatio), y-34-18 - ((44-30)*ipRatio), 
                            36 + ((44-36)*ipRatio), 36 + ((44-36)*ipRatio),
                            36-(ipRatio*36), 36-(ipRatio*36),
                            36-(ipRatio*36), 36-(ipRatio*36)
                        );
                        p.rect(
                            x+45-18 + ((34-27)*ipRatio), y-34-18 - ((44-30)*ipRatio), 
                            36 + ((44-36)*ipRatio), 36 + ((44-36)*ipRatio),
                            36-(ipRatio*36), 36-(ipRatio*36),
                            36-(ipRatio*36), 36-(ipRatio*36)
                        );
                        p.rect(
                            x-18 - ((22-18)*ipRatio), y-59-18 + ((30-19)*ipRatio), 
                            36 + ((43-36)*ipRatio), 36 + ((43-36)*ipRatio),
                            36-(ipRatio*36), 36-(ipRatio*36),
                            36-(ipRatio*36), 36-(ipRatio*36)
                        );

                        p.fill(
                            127+((207-127)*ipRatio),
                            140*ipRatio,
                            127-((127-40)*ipRatio)
                        );
                        p.rect(
                            x-45-17 - ((66-62)*ipRatio), y-22-17 - ((57-45)*ipRatio), 
                            36 - 3 - ((33-24)*ipRatio), 36 - 3 + ((44-33)*ipRatio),
                            33-(ipRatio*33), 33-(ipRatio*33),
                            33-(ipRatio*33), 33-(ipRatio*33)
                        );
                        p.rect(
                            x+45-17 + ((44-28)*ipRatio), y-22-17 - ((57-45)*ipRatio), 
                            36 - 3 - ((33-24)*ipRatio), 36 - 3 + ((44-33)*ipRatio),
                            33-(ipRatio*33), 33-(ipRatio*33),
                            33-(ipRatio*33), 33-(ipRatio*33)
                        );
                        p.rect(
                            x-17 + ((17-12)*ipRatio), y-70-17 + ((45-11)*ipRatio),
                            36 - 3 - ((33-23)*ipRatio), 36 - 3 + ((43-33)*ipRatio),
                            33-(ipRatio*33), 33-(ipRatio*33),
                            33-(ipRatio*33), 33-(ipRatio*33)
                        );
                    }

                    //var x1Diff = width * x1Ratio; //44.8
                    //var x2Diff = width * x2Ratio; //56
                    //var x3Diff = width * x3Ratio; //112

                    //var y1Diff = height * y1Ratio; //33.6
                    //var y2Diff = height * y2Ratio; //22.4
                    //var y3Diff = height * y3Ratio; //58.8
                    //var y4Diff = height * y4Ratio; //70
                    //var y5Diff = height * y5Ratio; //56

                    //console.log(x1Diff, x2Diff, x3Diff);
                    //console.log(y1Diff, y2Diff, y3Diff, y4Diff, y5Diff);

                    //width = width * eyeRatio; //36.4
                    //height = height * eyeRatio; //36.4

                    //console.log(width,height);

                    // eyes
                    //p.fill(0,0,0);
                    //p.ellipse(x-x1Diff,y-y1Diff,width,height);
                    //p.ellipse(x+x1Diff,y-y1Diff,width,height);
                    //p.ellipse(x,y-y3Diff,width,height);

                    //p.fill(127,0,127);
                    //p.ellipse(x-x1Diff,y-y2Diff,width-3,height-3);
                    //p.ellipse(x+x1Diff,y-y2Diff,width-3,height-3);
                    //p.ellipse(x,y-y4Diff,width-3,height-3);

                    //width = this._logoWidth;
                    //height = this._logoHeight;
                };

                o.drawSquareFace = function(p)
                {
                    var x = this._logoWidth/2;
                    var y = this._logoHeight/2;
                    var width = this._logoWidth;
                    var height = this._logoHeight;

                    // face
                    p.fill(207,140,40);
                    p.noStroke();
                    p.rect(
                        0, 0,
                        width, height
                    );

                    // eyes
                    p.fill(0,0,0);
                    p.rect(
                        x-22 - 56, 30,
                        44, 44
                    );
                    p.rect(
                        x-22 + 56, 30,
                        44, 44
                    );
                    p.rect(
                        x-22, 30,
                        43, 43
                    );

                    p.fill(207,140,40);
                    p.rect(
                        x-22 - 56 + 10, 30 + 15,
                        44 - 20, 44
                    );
                    p.rect(
                        x-22 + 56 + 10, 30 + 15,
                        44 - 20, 44
                    );
                    p.rect(
                        x-22 + 10, 30 + 15,
                        43 - 20, 43
                    );

                    //mouth
                    p.fill(0,0,0);
                    p.rect(
                        9, 126,
                        178, 50
                    );
                    p.fill(207,140,40);
                    p.rect(
                        9+15, 126-15,
                        178-30, 50
                    );
                };

                o.drawTriangleFace = function(p)
                {
                    var x = this._logoWidth/2;
                    var y = this._logoHeight/2;
                    var width = this._logoWidth;
                    var height = this._logoHeight;

                    // face
                    p.fill(17,140,200);
                    p.noStroke();
                    p.triangle(
                        0, 0,
                        width, 0,
                        x, height
                    );

                    // eyes
                    p.fill(0,0,0);
                    p.triangle(
                        x - 40, 15,
                        x-22 - 40, 40+15,
                        x+22 - 40, 40+15
                    );
                    p.triangle(
                        x + 40, 15,
                        x-22 + 40, 40+15,
                        x+22 + 40, 40+15
                    );
                    p.triangle(
                        x, 40+30,
                        x-22, 30,
                        x+22, 30 
                    );
                    p.fill(17,140,200);
                    p.triangle(
                        x - 40, 15 + 20,
                        x-22 - 40, 40+15 + 20,
                        x+22 - 40, 40+15 + 20
                    );
                    p.triangle(
                        x + 40, 15 + 20,
                        x-22 + 40, 40+15 + 20,
                        x+22 + 40, 40+15 + 20
                    );
                    p.triangle(
                        x, 40+30 - 20,
                        x-22, 30 - 20,
                        x+22, 30 - 20 
                    );

                    // mouth
                    p.fill(0,0,0);
                    p.triangle(
                        60, 100,
                        width-60, 100,
                        x, height-20
                    );
                    p.fill(17,140,200);
                    p.triangle(
                        80, 100,
                        width-80, 100,
                        x, height-60
                    );
                };

                /*
                var logoProcessingObj = function(p)
                {
                    var faceFlag = 0;
                    var interpolationCount = 0;
                    var MAX_INTERPOLATION_COUNT = 30;

                    p.setup = function()
                    {
                        console.log(this);
                        p.size(o._logoWidth, o._logoHeight);
                        var font = p.loadFont("monospace");
                        p.textFont(font);
                        p.frameRate(30);
                        p.background(0,0,0,0);
                    };
                    p.draw = function()
                    {
                        o.clear(p);
                        if (faceFlag === 0) 
                        {
                            o.drawCircleFace(p, interpolationCount, MAX_INTERPOLATION_COUNT);
                            if (interpolationCount >= MAX_INTERPOLATION_COUNT)
                            {
                                faceFlag++;
                                faceFlag = faceFlag % 3;
                                interpolationCount = 0;
                            }
                            else if (interpolationCount)
                            {
                                interpolationCount++;
                            }
                        }
                        else if (faceFlag === 1)
                        {
                            o.drawSquareFace(p);
                        }
                        else
                        {
                            o.drawTriangleFace(p);
                        }
                        p.loadPixels();
                        pixels = p.pixels;
                    };
                    p.mouseClicked = function()
                    {
                        if (!interpolationCount)
                        {
                            interpolationCount = 1;
                        }
                    };
                };
                o.activeCanvas = new Processing($('#logo-canvas')[0],logoProcessingObj);
                */

                return o;
            })();

            console.log('TOIMAWB', TOIMAWB);
        });
    </script>
    <body id="body">
        <div id="blawk-app" class="container">
            <div id="logo-container"></div>
            <!--<canvas id="logo-canvas"></canvas>-->
            <!--<div class="inline">
                <h1 class="inline">toimawb/</h1>
            </div>-->
            <div class="canvas">
                <a href="gears/gears.html"><div id="gears" class="menu-item"><div id="gears-highlight" class="menu-highlight"><h1 class="white">gears</h1></div></div></a>
                <a href="blawks/blawks.html"><div id="blawks" class="menu-item middle"><div id="blawks-highlight" class="menu-highlight"><h1 class="white">blawks</h1></div></div></a>
                <div class="menu-item"><h1></h1></div>
                <a href="about/about.html"><div id="about" class="menu-item"><div id="about-highlight" class="menu-highlight"><h1 class="white">about</h1></div></div></a>
                <a href="http://github.com/vijayrudraraju/toimawb"><div id="clone" class="menu-item middle"><div id="clone-highlight" class="menu-highlight"><h1 class="white">clone</h1></div></div></a>
                <a href="guestbook/guestbook.html"><div id="guestbook" class="menu-item"><div id="guestbook-highlight" class="menu-highlight"><h1 class="white">guest book</h1></div></div></a>
                <a href="skratch/skratch.html"><div id="skratch" class="menu-item"><div id="skratch-highlight" class="menu-highlight"><h1 class="white">skratch</h1></div></div></a>
                <div class="desc-item"><h2>"always broken, always in progress"</h2><br/><h2>altered 06.07.12</h2><br/><h2>by vijay rudraraju</h2></div>
            </div>
        </div>
    </body>
</html>
