<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="viewport" content="width=320"/>

        <meta charset="utf-8">
        <!-- Le styles -->
        <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
        <style type="text/css">
            html {
                width: 320px;
            }
            .inline {
                display: inline;
            }
            .container {
                margin-left: 10px;
                padding: 0px;
            }
            .canvas {
                position: relative;
                background: white;
                width: 240px;
                height: 120px;
            }
            .modes {
                position: relative;
                background: gray;
                width: 240px;
                height: 60px;
            }
            #red {
                position: absolute;
                background: rgb(255,0,0);
                width: 60px;
                height: 60px;
                left: 0px;
            }
            #green {
                position: absolute;
                background: rgb(0,80,0);
                width: 60px;
                height: 60px;
                left: 70px;
            }
            #blue {
                position: absolute;
                background: rgb(0,0,80);
                width: 60px;
                height: 60px;
                left: 140px;
            }
            #blackwhite {
                position: absolute;
                background: rgb(255,255,255);
                width: 30px;
                height: 60px;
                left: 210px;
            }
            .one {
                background: #000;
                width: 20px;
                height: 20px;
            }
        </style>
    </head>
    <script type="text/javascript" src="modules.js"></script>
    <script type="text/javascript" src="/_utils/script/json2.js"></script>
    <script type="text/javascript" src="vendor/jquery-1.6.js"></script>
    <script type="text/javascript" src="/_utils/script/jquery.couch.js"></script>
    <script type="text/javascript" src="vendor/underscore.js"></script>
    <script type="text/javascript" src="vendor/backbone.js"></script>
    <script type="text/javascript">
        $(function() {
            window.AppView = Backbone.View.extend({
                color: 'red',
                tintLight: true,
                tintActive: false,
                el: $('#blawk-app'),
                events: {
                    'click #red': 'red',
                    'click #green': 'green',
                    'click #blue': 'blue',
                    'click #blackwhite': 'blackwhite',
                    'click .one': 'tint',
                    'mouseenter .one': 'tint',
                    'mousedown .one': 'tintOn',
                    'mouseup .one': 'tintOff'
                },  
                initialize: function() {
                    this.render();
                },
                touch: function($el) {
                },
                onReset: function(coll,resp) {
                },
                saveToServer: function(e) {
                },
                render: function() {
                },
                tintOn: function(e) {
                    this.tintActive = true;
                },
                tintOff: function(e) {
                    this.tintActive = false;
                },
                tint: function(e) {
                },
                darken: function(oldColor) {
                },
                lighten: function(oldColor) {
                },
                blackwhite: function() {
                    this.tintLight = !this.tintLight;
                    if (this.tintLight) {
                        $('#blackwhite').css('background','rgb(255,255,255)');
                    } else {
                        $('#blackwhite').css('background','rgb(0,0,0)');
                    }
                },
                red: function() {
                    this.color = 'red';
                    $('#red').css('background','rgb(255,0,0)');
                    $('#green').css('background','rgb(0,80,0)');
                    $('#blue').css('background','rgb(0,0,80)');
                },
                green: function() {
                    this.color = 'green';
                    $('#red').css('background','rgb(80,0,0)');
                    $('#green').css('background','rgb(0,255,0)');
                    $('#blue').css('background','rgb(0,0,80)');
                },
                blue: function() {
                    this.color = 'blue';
                    $('#red').css('background','rgb(100,0,0)');
                    $('#green').css('background','rgb(0,100,0)');
                    $('#blue').css('background','rgb(0,0,255)');
                }
            });

            window.App = new AppView;
            /*
            document.body.addEventListener('touchenter', function(e){ 
                console.log('touchenter');
            },false);
            */
            document.body.addEventListener('touchstart', function(e){ 
                //e.preventDefault();
            },false);
            document.body.addEventListener('touchend', function(e){ 
                //e.preventDefault();
            },false);
            //document.body.addEventListener('touchmove', function(e){ 
            $('.canvas').delegate('.one', 'touchmove', function(event) {
                //console.log('touchmove');
                var e = event.originalEvent;
                e.preventDefault(); 
                window.App.touch($(document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY)));
                /*
                var blawkWidthNum = Math.floor($('.canvas').width() / 20);
                var blawkHeightNum = Math.floor($('.canvas').height() / 20);
                console.log("pageX: "+e.targetTouches[0].pageX);
                console.log("pageY: "+e.targetTouches[0].pageY);
                console.log($("#index0x0").offset().left);
                console.log($("#index0x0").offset().top);
                */
            },false);
        });
    </script>
    <body id="body">
        <div id="blawk-app" class="container">
            <div class="page-header inline">
                <a class="inline" href="index.html"><h3 class="inline">blawks</h3></a>
            </div>
            <div class="canvas">
                <a href="blawkone_a.html"><div id="red"></div></a>
            </div>
        </div>
    </body>
</html>
